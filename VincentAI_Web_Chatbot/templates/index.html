<!DOCTYPE html>
font-weight: bold;
}


#send-btn:hover {
background: #00c0dd;
}
</style>
</head>
<body>
<!-- SIDEBAR -->
<div id="sidebar">
<h2>ğŸ“ Chats</h2>
<div id="history-list"></div>
</div>


<!-- MAIN CHAT -->
<div id="chat-container">
<div id="chat-header">ğŸ¤– MrPapi CyBot</div>
<div id="chat-messages"></div>


<div id="chat-input">
<input id="user-input" type="text" placeholder="Type a message..." />
<button id="send-btn">Send</button>
</div>
</div>


<script>
const sendBtn = document.getElementById("send-btn");
const userInput = document.getElementById("user-input");
const chatMessages = document.getElementById("chat-messages");
const historyList = document.getElementById("history-list");


function appendMessage(sender, text) {
const messageDiv = document.createElement("div");
messageDiv.classList.add(sender === "user" ? "user-message" : "bot-message");
messageDiv.innerText = text;
chatMessages.appendChild(messageDiv);
chatMessages.scrollTop = chatMessages.scrollHeight;
}


function addToHistory(text) {
const item = document.createElement("div");
item.classList.add("history-item");
item.innerText = text.slice(0, 40) + "...";
item.addEventListener("click", () => {
userInput.value = text;
});
historyList.appendChild(item);
}


async function sendMessage() {
const text = userInput.value.trim();
if (!text) return;


appendMessage("user", text);
addToHistory(text);
userInput.value = "";


try {
const response = await fetch("/chat", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify({ message: text }),
});


const data = await response.json();
appendMessage("bot", data.reply);
} catch (error) {
appendMessage("bot", "âš ï¸ Connection error.");
}
}


sendBtn.addEventListener("click", sendMessage);
userInput.addEventListener("keypress", (e) => {
if (e.key === "Enter") sendMessage();
});
</script>
</body>
</html>